<div class="container mx-auto px-4 py-6 mt-14 min-h-screen">
    <div class="page-header flex justify-between items-center mb-6">
        <h1 class="text-3xl font-semibold">Nueva Solicitud de Reparación</h1>
    </div>

    <% if (messages.error && messages.error.length> 0) { %>
        <% messages.error.forEach(function(message) { %>
            <div id="alert-border-2" class="flex items-center p-4 mb-4 text-red-800 border-t-4 border-red-300 bg-red-50"
                role="alert">
                <i class="fa-solid fa-circle-info"></i>
                <div class="ms-3 text-sm font-medium">
                    <%= message %>
                </div>
                <button type="button"
                    class="ms-auto -mx-1.5 -my-1.5 bg-red-50 text-red-500 rounded-lg focus:ring-2 focus:ring-red-400 p-1.5 hover:bg-red-200 inline-flex items-center justify-center h-8 w-8"
                    data-dismiss-target="#alert-border-2" aria-label="Close">
                    <span class="sr-only">Dismiss</span>
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <% }) %>
                <% } else if (messages.success && messages.success.length> 0) { %>
                    <% messages.success.forEach(function(message) { %>
                        <div id="alert-border-3"
                            class="flex items-center p-4 mb-4 text-green-800 border-t-4 border-green-300 bg-green-50"
                            role="alert">
                            <i class="fa-solid fa-circle-info"></i>
                            <div class="ms-3 text-sm font-medium">
                                <%= message %>
                            </div>
                            <button type="button"
                                class="ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8"
                                data-dismiss-target="#alert-border-3" aria-label="Close">
                                <span class="sr-only">Dismiss</span>
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </div>
                        <% }) %>
                            <% } %>

    <div class="card bg-white p-6 rounded-lg shadow-md">
        <form method="POST" action="/repairs/new" class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <!-- Equipo -->
            <div>
                <label for="id_equipo" class="block text-sm font-semibold text-gray-700 mb-1">Equipo</label>
                <select id="id_equipo" name="id_equipo"
                    class="w-full border px-3 py-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    <option value="">Seleccionar equipo...</option>
                    <% equipos.forEach(equipo => { %>
                        <option value="<%= equipo.id_equipo %>">
                            <%= equipo.tipo %> - <%= equipo.marca %> <%= equipo.modelo %> (<%= equipo.serie %>)
                        </option>
                    <% }); %>
                </select>
            </div>

            <!-- Técnico -->
            <div>
                <label for="id_tecnico" class="block text-sm font-semibold text-gray-700 mb-1">Técnico Asignado</label>
                <select id="id_tecnico" name="id_tecnico"
                    class="w-full border px-3 py-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    <option value="">Seleccionar técnico...</option>
                    <% tecnicos.forEach(tecnico => { %>
                        <option value="<%= tecnico.id_usuario %>"><%= tecnico.nombre %></option>
                    <% }); %>
                </select>
            </div>

            <!-- Prioridad -->
            <div>
                <label for="prioridad" class="block text-sm font-semibold text-gray-700 mb-1">Prioridad</label>
                <select id="prioridad" name="prioridad"
                    class="w-full border px-3 py-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    <option value="baja">Baja</option>
                    <option value="media">Media</option>
                    <option value="alta">Alta</option>
                </select>
            </div>

            <!-- Estado -->
            <div>
                <label for="estado" class="block text-sm font-semibold text-gray-700 mb-1">Estado</label>
                <select id="estado" name="estado"
                    class="w-full border px-3 py-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    <option value="En revisión">En revisión</option>
                    <option value="En reparación">En reparación</option>
                    <option value="Reparado">Reparado</option>
                    <option value="Descartado">Descartado</option>
                </select>
            </div>

            <!-- Descripción del problema -->
            <div class="md:col-span-2">
                <label for="descripcion_problema" class="block text-sm font-semibold text-gray-700 mb-1">Descripción del Problema</label>
                <textarea id="descripcion_problema" name="descripcion_problema" rows="4"
                    class="w-full border px-3 py-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                    placeholder="Describe el problema del equipo..."></textarea>
            </div>

            <!-- Botones -->
            <div class="md:col-span-2 flex justify-end gap-3 pt-4">
                <button type="button" onclick="history.back()"
                    class="px-4 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-200 transition-colors">
                    Cancelar
                </button>
                <button type="submit"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                    Crear Solicitud
                </button>
            </div>
        </form>
    </div>
</div>
